import csv

def carregar_usuarios():
    usuarios = {}
    with open('usuarios.csv', mode='r') as arquivo:
        linhas = csv.DictReader(arquivo)
        for linha in linhas:
            usuarios[linha['codigo']] = linha
    return usuarios

def salvar_usuarios(usuarios):
    with open('usuarios.csv', mode='w') as arquivo:
        nomes_campos = ['codigo', 'nome completo', 'usuario', 'senha', 'administrador']
        linhas = csv.DictWriter(arquivo, fieldnames = nomes_campos)
        linhas.writeheader()
        for linha in usuarios.values():
            linhas.writerow(linha)

def criar_usuario(usuarios, id, nome_completo, usuario, senha, administrador):
    if id in usuarios:
        print("Usuário já existe!")
        return
    usuarios[id] = {
        'codigo': id,
        'nome completo': nome_completo,
        'usuario': usuario,
        'senha': senha,
        'administrador': administrador
    }
    salvar_usuarios(usuarios)
    print("Usuário criado com sucesso!")

def alterar_usuario(usuarios, id, **kwargs):
    if id not in usuarios:
        print("Usuário não encontrado!")
        return
    usuarios[id].update(kwargs)
    salvar_usuarios('usuarios.csv', usuarios)
    print("Usuário atualizado com sucesso!")\

def listar_usuarios(usuarios):
      for usuario in usuarios.values():
        print(usuario)

def deletar_usuario(usuarios, id):
    if id in usuarios:
        del usuarios[id]
        salvar_usuarios(usuarios)
        print("Usuário removido com sucesso!")
    else:
        print("Usuário não encontrado!")


usuarios = carregar_usuarios()
listar_usuarios(usuarios)

